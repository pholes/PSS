<resource xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
          xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
          xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3"
          xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
          xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
          oid="feed0000-0000-0000-0000-PSS999999100">
   <name>Role import</name>
   <description>Bulk import role</description>   
   <operationalState>
      <lastAvailabilityStatus>up</lastAvailabilityStatus>
   </operationalState>
   <connectorRef oid="36c45ce9-8a2e-4c4f-87d0-d24c2646895d"
                 relation="org:default"
                 type="c:ConnectorType"/>
   <connectorConfiguration xmlns:icfc="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/connector-schema-3">
      <icfc:configurationProperties xmlns:gen735="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/bundle/com.evolveum.polygon.connector-csv/com.evolveum.polygon.connector.csv.CsvConnector">
         <gen735:multivalueDelimiter>,</gen735:multivalueDelimiter>
         <gen735:commentMarker>#</gen735:commentMarker>
         <gen735:filePath>/var/opt/midpoint/import/kweria_rbac.csv</gen735:filePath>
         <gen735:quoteMode>NONE</gen735:quoteMode>
         <gen735:ignoreEmptyLines>true</gen735:ignoreEmptyLines>
         <gen735:readOnly>true</gen735:readOnly>
         <gen735:encoding>UTF-8</gen735:encoding>
         <gen735:fieldDelimiter>,</gen735:fieldDelimiter>
         <gen735:ignoreSurroundingSpaces>true</gen735:ignoreSurroundingSpaces>
         <gen735:trim>true</gen735:trim>
         <gen735:headerExists>true</gen735:headerExists>
         <gen735:ignoreIdentifierCase>true</gen735:ignoreIdentifierCase>
         <gen735:nameAttribute>name</gen735:nameAttribute>
         <gen735:uniqueAttribute>name</gen735:uniqueAttribute>
      </icfc:configurationProperties>
   </connectorConfiguration>
   <schema>
      <cachingMetadata>
         <retrievalTimestamp>2018-02-27T09:48:52.350Z</retrievalTimestamp>
         <serialNumber>3651c53d083f896f-769bdd0ccaaedc7f</serialNumber>
      </cachingMetadata>
      <definition>
         <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                     xmlns:a="http://prism.evolveum.com/xml/ns/public/annotation-3"
                     xmlns:tns="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
                     xmlns:ra="http://midpoint.evolveum.com/xml/ns/public/resource/annotation-3"
                     elementFormDefault="qualified"
                     targetNamespace="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">
            <xsd:import namespace="http://prism.evolveum.com/xml/ns/public/annotation-3"/>
            <xsd:import namespace="http://midpoint.evolveum.com/xml/ns/public/resource/annotation-3"/>
            <xsd:complexType name="AccountObjectClass">
               <xsd:annotation>
                  <xsd:appinfo>
                     <ra:resourceObject/>
                     <ra:identifier>ri:name</ra:identifier>
                     <ra:displayNameAttribute>ri:name</ra:displayNameAttribute>
                     <ra:namingAttribute>ri:name</ra:namingAttribute>
                     <ra:nativeObjectClass>__ACCOUNT__</ra:nativeObjectClass>
                     <ra:kind>account</ra:kind>
                     <ra:default>true</ra:default>
                  </xsd:appinfo>
               </xsd:annotation>
               <xsd:sequence>
                  <xsd:element minOccurs="0" name="_xfeffoid" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>120</a:displayOrder>
                           <ra:nativeAttributeName>﻿oid</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>﻿oid</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="displayName" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>130</a:displayOrder>
                           <ra:nativeAttributeName>displayName</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>displayName</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="roleType" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>140</a:displayOrder>
                           <ra:nativeAttributeName>roleType</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>roleType</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="system" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>150</a:displayOrder>
                           <ra:nativeAttributeName>system</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>system</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="securityApproval" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>160</a:displayOrder>
                           <ra:nativeAttributeName>securityApproval</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>securityApproval</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="requestable" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>170</a:displayOrder>
                           <ra:nativeAttributeName>requestable</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>requestable</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="module" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>180</a:displayOrder>
                           <ra:nativeAttributeName>module</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>module</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="description" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>190</a:displayOrder>
                           <ra:nativeAttributeName>description</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>description</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="category" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>200</a:displayOrder>
                           <ra:nativeAttributeName>category</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>category</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="delegable" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>210</a:displayOrder>
                           <ra:nativeAttributeName>delegable</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>delegable</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element name="name" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>100</a:displayOrder>
                           <ra:nativeAttributeName>name</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>__NAME__</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="identifier" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>220</a:displayOrder>
                           <ra:nativeAttributeName>identifier</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>identifier</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="access" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>230</a:displayOrder>
                           <ra:nativeAttributeName>access</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>access</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="roleOwner" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>240</a:displayOrder>
                           <ra:nativeAttributeName>roleOwner</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>roleOwner</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="roleApprover" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>250</a:displayOrder>
                           <ra:nativeAttributeName>roleApprover</ra:nativeAttributeName>
                           <ra:frameworkAttributeName>roleApprover</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
               </xsd:sequence>
            </xsd:complexType>
         </xsd:schema>
      </definition>
   </schema>
   <schemaHandling>
      <objectType>
         <kind>account</kind>
         <intent>role</intent>
         <displayName>Roles</displayName>
         <default>true</default>
         <objectClass>ri:AccountObjectClass</objectClass>
         <attribute>
            <c:ref>ri:name</c:ref>
            <displayName>Name</displayName>            
            <limitations>
                <access>
					<read>true</read>
                </access>
            </limitations>
			<inbound>               
               <strength>strong</strength>
               <channel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#reconciliation</channel>
               <expression>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
       input.capitalize();
    </code>
                  </script>
               </expression>
               <target>
                  <c:path>$roleType/name</c:path>
               </target>
               <condition>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input!=null;
    </code>
                  </script>
               </condition>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:displayName</c:ref>
			<limitations>
                <access>
					<read>true</read>
                </access>
            </limitations>
            <inbound>               
               <strength>strong</strength>
               <expression>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input.capitalze();
    </code>
                  </script>
               </expression>
               <target>
                  <c:path>$roleType/displayName</c:path>
               </target>
               <condition>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input !=null
    </code>
                  </script>
               </condition>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:description</c:ref>            
            <inbound>
               <strength>strong</strength>
               <expression>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input.trim();
    </code>
                  </script>
               </expression>
               <target>
                  <c:path>$roleType/description</c:path>
               </target>
               <condition>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input!=null;
    </code>
                  </script>
               </condition>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:identifier</c:ref>
			<limitations>
                <access>
					<read>true</read>
                </access>
            </limitations>
            <matchingRule xmlns:gen794="http://prism.evolveum.com/xml/ns/public/matching-rule-3">gen794:stringIgnoreCase</matchingRule>
            <inbound>
               <strength>strong</strength>
               <expression>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input !=null
    </code>
                  </script>
               </expression>
               <target>
                  <c:path>$roleType/identifier</c:path>
               </target>
               <condition>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input !=null;
    </code>
                  </script>
               </condition>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:module</c:ref>
			<limitations>
                <access>
					<read>true</read>
                </access>
            </limitations>
            <inbound>
               <strength>strong</strength>
               <expression>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input.trim();
    </code>
                  </script>
               </expression>
               <target>
                  <c:path>$roleType/extension/module</c:path>
               </target>
               <condition>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input !=null;
    </code>
                  </script>
               </condition>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:access</c:ref>
			<limitations>
                <access>
					<read>true</read>
                </access>
            </limitations>
            <inbound>
               <strength>strong</strength>
               <expression>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input.trim();
        </code>
                  </script>
               </expression>
               <target>
                  <c:path>$roleType/extension/access</c:path>
               </target>
               <condition>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input !=null;
    </code>
                  </script>
               </condition>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:category</c:ref>
			<limitations>
                <access>
					<read>true</read>
                </access>
            </limitations>            
            <inbound>
               <strength>strong</strength>
               <expression>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input.trim();
    </code>
                  </script>
               </expression>
               <target>
                  <c:path>$roleType/extension/category</c:path>
               </target>
               <condition>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input !=null;
    </code>
                  </script>
               </condition>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:roleType</c:ref>
			<limitations>
                <access>
					<read>true</read>
                </access>
            </limitations>            
            <inbound>
               <strength>strong</strength>
               <expression>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input.trim();
    </code>
                  </script>
               </expression>
               <target>
                  <c:path>$roleType/roleType</c:path>
               </target>
               <condition>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input !=null;
    </code>
                  </script>
               </condition>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:requestable</c:ref>
			<limitations>
                <access>
					<read>true</read>
                </access>
            </limitations>
            <inbound>
               <strength>strong</strength>
               <expression>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input.trim();
    </code>
                  </script>
               </expression>
               <target>
                  <c:path>$roleType/requestable</c:path>
               </target>
               <condition>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input!=mull;
    </code>
                  </script>
               </condition>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:system</c:ref>            
			<limitations>
                <access>
					<read>true</read>
                </access>
            </limitations>
            <inbound>
               <strength>strong</strength>			
               <expression>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input.trim();
    </code>
                  </script>
               </expression>
               <target>
                  <c:path>$roleType/extension/system</c:path>
               </target>
               <condition>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input!=null;
    </code>
                  </script>
               </condition>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:securityApproval</c:ref>
			<limitations>
                <access>
					<read>true</read>
                </access>
            </limitations>            
            <inbound>
               <strength>strong</strength>
               <expression>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input.trim();
    </code>
                  </script>
               </expression>
               <target>
                  <c:path>$roleType/extension/secApprove</c:path>
               </target>
               <condition>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input !=null;
    </code>
                  </script>
               </condition>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:delegable</c:ref>
			<limitations>
                <access>
					<read>true</read>
                </access>
            </limitations>
            <inbound>
               <strength>strong</strength>
               <expression>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input.trim();
    </code>
                  </script>
               </expression>
               <target>
                  <c:path>$roleType/delegable</c:path>
               </target>
               <condition>
                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                          xsi:type="c:ScriptExpressionEvaluatorType">
                     <code>
        input !=null;
    </code>
                  </script>
               </condition>
            </inbound>
         </attribute>
      </objectType>
   </schemaHandling>
   <capabilities>
      <cachingMetadata>
         <retrievalTimestamp>2018-02-27T09:48:52.349Z</retrievalTimestamp>
         <serialNumber>448065b6aea54d50-d6964c3e13c9be8b</serialNumber>
      </cachingMetadata>
      <native xmlns:cap="http://midpoint.evolveum.com/xml/ns/public/resource/capabilities-3"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:type="c:CapabilityCollectionType">
         <cap:schema/>
         <cap:liveSync/>
         <cap:testConnection/>
         <cap:create/>
         <cap:read/>
         <cap:update/>
         <cap:delete/>
         <cap:script>
            <cap:host>
               <cap:type>connector</cap:type>
            </cap:host>
         </cap:script>
         <cap:addRemoveAttributeValues/>
      </native>
   </capabilities>
   <synchronization>
      <objectSynchronization>
         <name>ImportRole</name>
         <objectClass>AccountObjectClass</objectClass>
         <intent>role</intent>
         <focusType>c:RoleType</focusType>
         <enabled>true</enabled>
         <correlation>
            <q:description>name&gt;name</q:description>
            <q:equal>
               <q:path>c:name</q:path>
               <expression xmlns="">
                  <path>$account/attributes/icfs:uid</path>
               </expression>
            </q:equal>
         </correlation>
         <reconcile>true</reconcile>
         <reaction>
            <situation>unmatched</situation>
            <channel/>
            <synchronize>true</synchronize>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#addFocus</handlerUri>
            </action>
         </reaction>
         <reaction>
            <situation>linked</situation>
            <channel/>
            <synchronize>true</synchronize>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#link</handlerUri>
            </action>
         </reaction>
         <reaction>
            <situation>unlinked</situation>
            <channel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#reconciliation</channel>
            <synchronize>true</synchronize>
            <reconcile>true</reconcile>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#unlink</handlerUri>
            </action>
         </reaction>
      </objectSynchronization>
   </synchronization>
</resource>